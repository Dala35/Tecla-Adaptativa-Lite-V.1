<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Tecla Adapta Lite ‚Äì Multilingue e Pictogramas</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { font-family:'Inter',sans-serif; background:linear-gradient(to bottom right,#111827,#1f2937); color:white; min-height:100vh; padding:1rem; }
.button-style { padding:1rem; border-radius:0.75rem; color:white; font-weight:600; cursor:pointer; transition:all 0.2s ease-in-out; box-shadow:0 4px 6px rgba(0,0,0,0.2); }
.button-style:hover { transform: scale(1.05); box-shadow:0 8px 10px rgba(0,0,0,0.3); }
.card { background-color:#2a2a2a; border-radius:1rem; padding:1rem; margin-bottom:1rem; transition: all 0.3s; }
.card:hover { transform: scale(1.02); box-shadow:0 8px 12px rgba(0,0,0,0.4);}
</style>
</head>
<body class="flex flex-col items-center">

<div class="max-w-3xl w-full">
    <h1 class="text-4xl font-bold text-center text-primary-blue mb-6">üß† Tecla Adapta Lite</h1>
    <p class="text-center text-gray-300 mb-6">Escolha, dite ou escreva. As tradu√ß√µes e vocaliza√ß√£o estar√£o no idioma selecionado.</p>

    <!-- Seletor de Idioma -->
    <div class="mb-6">
        <label for="lang-select" class="block mb-2 text-gray-400 font-medium">Idioma de vocaliza√ß√£o e destaque:</label>
        <select id="lang-select" onchange="mudarLinguaVocalizacao(this.value)" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white cursor-pointer">
            <option value="ckw" selected>Cokwe (Chokwe)</option>
            <option value="knd">Kimbundo</option>
            <option value="mbu">Umbundu</option>
        </select>
    </div>

    <!-- Campo de Texto -->
    <div class="flex gap-4 mb-6">
        <input id="text-input" type="text" placeholder="Escreva ou cole uma frase..." class="flex-1 p-3 rounded-lg bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-primary-blue focus:border-primary-blue transition duration-200" onkeydown="if(event.key==='Enter') handleTextInput()">
        <button onclick="handleTextInput()" class="button-style bg-gray-600 flex items-center justify-center"><span class="mr-2">‚úçÔ∏è</span> Traduzir</button>
    </div>

    <!-- Bot√£o de Microfone -->
    <button id="mic-button" onclick="toggleMic()" class="button-style bg-primary-blue w-full flex items-center justify-center mb-6"><span class="text-2xl mr-2">üé§</span> Falar</button>

    <!-- Lista de Frases com Emojis -->
    <div id="frases-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>

    <!-- Output -->
    <div id="resposta" class="mt-6 p-6 bg-gray-900 rounded-xl text-center min-h-[7rem]">
        <p class="text-gray-400">Clique numa frase ou use o microfone/entrada de texto para come√ßar.</p>
    </div>
</div>

<footer class="mt-10 text-sm text-gray-400 text-center max-w-3xl">
Criado por Dala De Carvalho ‚Äì Projeto DALA CURE OS | Linguagens adaptadas para Cokwe, Kimbundo e Umbundu.
</footer>

<script>
let linguaVocalizacao = 'ckw';
const linguasInfo = { ckw:{nome:'Cokwe',cor:'text-green-500'}, knd:{nome:'Kimbundo',cor:'text-yellow-400'}, mbu:{nome:'Umbundu',cor:'text-red-500'} };
let frases = [];

// Carregar JSON externo
fetch('frases.json')
  .then(res => res.json())
  .then(data => {
      frases = data;
      renderFrases();
  {"pt":"Ol√°","ckw":"Moyo wenu","knd":"Dizanga","mbu":"Moyo u wa","emoji":"üëã"},
  {"pt":"Bom dia","ckw":"Moyo wenu","knd":"Dizanga","mbu":"Moyo u wa","emoji":"‚òÄÔ∏è"},
  {"pt":"Boa tarde","ckw":"Moyo weno","knd":"Dizango","mbu":"Moyo u li","emoji":"üåá"},
  {"pt":"Boa noite","ckw":"Moyo weno","knd":"Dizango","mbu":"Moyo u li","emoji":"üåô"},
  {"pt":"Como est√°s?","ckw":"Kanawa?","knd":"Uejinga u√™?","mbu":"Oku li ndati?","emoji":"ü§î"},
  {"pt":"Estou bem","ckw":"Ngulhi kanawa","knd":"Nga ri kilembu","mbu":"Ndi li pala","emoji":"‚úÖ"},
  {"pt":"Obrigado(a)","ckw":"Na√ßakwila","knd":"Kutulenda","mbu":"Pandula","emoji":"üôè"},
  {"pt":"Desculpa","ckw":"Ngulhi zola","knd":"Ngi pinda","mbu":"Ndipandula","emoji":"üòÖ"},
  {"pt":"Eu te amo","ckw":"Na ku zanga","knd":"Ngi ku zola","mbu":"Ndi ku sole","emoji":"‚ù§Ô∏è"},
  {"pt":"Quero comer","ckw":"Nguna zangue kulhia","knd":"Ngi zanda kulia","mbu":"Ndiongola li√£","emoji":"üçΩÔ∏è"},
  {"pt":"Estou cansado","ckw":"Ngulhi kuta","knd":"Nga li kuyika","mbu":"Ndi li kuta","emoji":"üò¥"},
  {"pt":"Vamos trabalhar","ckw":"Tuya kulhia","knd":"Tuila kumbi","mbu":"Tuyila kulia","emoji":"üíº"},
  {"pt":"Parab√©ns","ckw":"Wanda","knd":"Kutuba","mbu":"Pandu","emoji":"üéâ"},
  {"pt":"Feliz anivers√°rio","ckw":"Wanda muoyo","knd":"Kutuba luzingu","mbu":"Pandu li ndeka","emoji":"üéÇ"},
  {"pt":"Ajuda-me","ckw":"Sunga muoyo","knd":"Sunga nga","mbu":"Sunga ndi","emoji":"üÜò"},
  {"pt":"Onde est√°s?","ckw":"Weza wapi?","knd":"Uli wapi?","mbu":"Oli wapi?","emoji":"üìç"},
  {"pt":"Estou em casa","ckw":"Ngulhi ku nyumba","knd":"Nga li ku samba","mbu":"Ndi li ku ndyumba","emoji":"üè†"},
  {"pt":"Vamos sair","ckw":"Tuya ku safu","knd":"Tuila ku senda","mbu":"Tuyila ku sala","emoji":"üö∂"},
  {"pt":"Estou feliz","ckw":"Ngulhi muoyo wanga","knd":"Nga li luzingu","mbu":"Ndi li muoyo","emoji":"üòä"},
  {"pt":"Estou triste","ckw":"Ngulhi ndetu","knd":"Nga li ndeta","mbu":"Ndi li ndetu","emoji":"üò¢"}
  })
  .catch(err => console.error("Erro ao carregar JSON:", err));

function renderFrases(){
    const container = document.getElementById('frases-container');
    container.innerHTML='';
    frases.forEach(f=>{
        const card=document.createElement('div');
        card.className='card cursor-pointer';
        card.innerHTML=`<span class="text-3xl">${f.emoji}</span><p class="mt-2 font-semibold text-white">${f.pt}</p>`;
        card.onclick=()=>exibirFrase(f);
        container.appendChild(card);
    });
}

function exibirFrase(f){
    const output=document.getElementById('resposta');
    output.innerHTML=`
        <div class="flex flex-col space-y-2">
            <p class="font-bold text-xl">Portugu√™s:</p><p class="text-white">${f.pt}</p>
            <p class="font-bold ${linguasInfo.ckw.cor} text-lg">${linguasInfo.ckw.nome}: ${f.ckw}</p>
            <p class="font-bold ${linguasInfo.knd.cor} text-lg">${linguasInfo.knd.nome}: ${f.knd}</p>
            <p class="font-bold ${linguasInfo.mbu.cor} text-lg">${linguasInfo.mbu}</p>
        </div>
    `;
    falar(f[linguaVocalizacao]);
}

function mudarLinguaVocalizacao(nova){ linguaVocalizacao=nova; }

function falar(texto){
    if('speechSynthesis' in window){
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance(texto);
        msg.lang='pt-AO';
        window.speechSynthesis.speak(msg);
    }
}

function handleTextInput(){
    const texto=document.getElementById('text-input').value.trim();
    if(!texto)return;
    const f=frases.find(fr=>fr.pt.toLowerCase()===texto.toLowerCase());
    if(f) exibirFrase(f);
    else document.getElementById('resposta').innerHTML='<p class="text-red-500 font-bold">Frase n√£o encontrada na base.</p>';
    document.getElementById('text-input').value='';
}

// Speech Recognition
let recognition,isListening=false;
if(window.SpeechRecognition||window.webkitSpeechRecognition){
    const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
    recognition=new SR();
    recognition.continuous=false;
    recognition.interimResults=false;
    recognition.lang='pt-PT';
    recognition.onstart=()=>{isListening=true;document.getElementById('mic-button').innerHTML='üî¥ A ouvir...';};
    recognition.onend=()=>{isListening=false;document.getElementById('mic-button').innerHTML='üé§ Falar';};
    recognition.onresult=(e)=>{document.getElementById('text-input').value=e.results[0][0].transcript; handleTextInput();};
    recognition.onerror=(e)=>{console.error(e);};
}
function toggleMic(){ if(!recognition)return; isListening?recognition.stop():recognition.start();}
</script>

</body>
</html>
