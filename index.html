<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Tecla Adaptativa Lite ‚Äì IA Aprendizado JSON</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { background: linear-gradient(to bottom right,#111827,#1f2937); font-family:'Inter',sans-serif; color:white;}
.container { max-width:800px; margin:2rem auto; padding:2rem; background:#1f2937; border-radius:1rem; box-shadow:0 8px 20px rgba(0,0,0,0.5);}
.button { padding:0.75rem 1rem; border-radius:0.5rem; font-weight:600; cursor:pointer; transition:all 0.2s; }
.button:hover { transform:scale(1.05); }
.input { width:100%; padding:0.75rem; border-radius:0.5rem; margin-top:0.5rem; background:#2a2a2a; color:white; border:none;}
.output { margin-top:1rem; background:#111827; padding:1rem; border-radius:0.75rem; min-height:5rem;}
</style>
</head>
<body>

<div class="container">
  <h1 class="text-3xl font-bold text-center mb-4 text-blue-500">üß† Tecla Adaptativa Lite ‚Äì IA JSON</h1>
  <p class="text-gray-300 mb-4 text-center">Digite ou fale a frase em portugu√™s, a IA aprende e sugere tradu√ß√µes autom√°ticas com emoji.</p>

  <input type="text" id="textInput" class="input" placeholder="Escreva ou fale a frase em Portugu√™s..." />
  <button class="button bg-blue-500 mt-2" onclick="processarFrase()">Traduzir / Aprender</button>

  <div class="output" id="output">Aqui aparecer√° a tradu√ß√£o e emoji.</div>

  <h2 class="text-xl font-semibold mt-6 mb-2 text-blue-400">Adicionar Nova Frase</h2>
  <input type="text" id="newPT" class="input" placeholder="Frase em Portugu√™s"/>
  <input type="text" id="newCKW" class="input" placeholder="Tradu√ß√£o Cokwe"/>
  <input type="text" id="newKND" class="input" placeholder="Tradu√ß√£o Kimbundo"/>
  <input type="text" id="newMBU" class="input" placeholder="Tradu√ß√£o Umbundu"/>
  <input type="text" id="newEmoji" class="input" placeholder="Emoji"/>
  <button class="button bg-green-500 mt-2" onclick="adicionarFrase()">Adicionar ao JSON Local</button>
</div>

<script>
// IA local e mem√≥ria JSON
let frases = [];

// Carregar JSON local (simula√ß√£o fetch)
async function carregarJSON() {
  try {
    const res = await fetch('frases.json');
    frases = await res.json();
    console.log("JSON carregado:", frases.length, "frases");
  } catch (e) {
    console.warn("N√£o foi poss√≠vel carregar o JSON, iniciando vazio");
    frases = [];
  }
}
carregarJSON();

// Fun√ß√£o IA para processar frase
function processarFrase() {
  const input = document.getElementById('textInput').value.trim();
  if (!input) return alert("Digite algo!");
  
  // Busca exata ou similar (simples)
  let resultado = frases.find(f => f.pt.toLowerCase() === input.toLowerCase());
  if (!resultado) {
    // Busca aproximada (palavras)
    const inputWords = input.toLowerCase().split(/\s+/);
    resultado = frases.find(f => inputWords.some(w => f.pt.toLowerCase().includes(w)));
  }

  const output = document.getElementById('output');
  if (resultado) {
    output.innerHTML = `
      <p><strong>Portugu√™s:</strong> ${resultado.pt}</p>
      <p><strong>Cokwe:</strong> ${resultado.ckw}</p>
      <p><strong>Kimbundo:</strong> ${resultado.knd}</p>
      <p><strong>Umbundu:</strong> ${resultado.mbu}</p>
      <p><strong>Emoji:</strong> ${resultado.emoji}</p>
    `;
    falar(resultado[document.getElementById('langSelect')?.value || 'ckw']);
  } else {
    output.innerHTML = `<p class="text-yellow-400">Frase n√£o encontrada. IA vai aprender se voc√™ adicionar.</p>`;
  }
}

// Fun√ß√£o para adicionar frase nova
function adicionarFrase() {
  const pt = document.getElementById('newPT').value.trim();
  const ckw = document.getElementById('newCKW').value.trim();
  const knd = document.getElementById('newKND').value.trim();
  const mbu = document.getElementById('newMBU').value.trim();
  const emoji = document.getElementById('newEmoji').value.trim();
  if(!pt||!ckw||!knd||!mbu||!emoji) return alert("Preencha todos os campos");

  const nova = {pt,ckw,knd,mbu,emoji};
  frases.push(nova);
  alert("Frase adicionada √† IA local com sucesso!");
  document.getElementById('newPT').value = '';
  document.getElementById('newCKW').value = '';
  document.getElementById('newKND').value = '';
  document.getElementById('newMBU').value = '';
  document.getElementById('newEmoji').value = '';
}

// Fun√ß√£o TTS
function falar(texto) {
  if ('speechSynthesis' in window) {
    window.speechSynthesis.cancel();
    const utter = new SpeechSynthesisUtterance(texto);
    utter.lang = 'pt-AO';
    window.speechSynthesis.speak(utter);
  }
}
</script>
</body>
</html>
